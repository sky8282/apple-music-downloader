# Changelog

All notable changes to this project will be documented in this file.

## [v2.2.0] - 2025-10-09

### âœ¨ New Features

#### ğŸ”§ æ—¥å¿—ä¸UIæ²»ç†æ–¹æ¡ˆ
- **å…¨å±€OutputMutex + SafePrintfå°è£…** - è§£å†³è¾“å‡ºäº¤ç»‡å’Œå…‰æ ‡é”™ä½é—®é¢˜
- **--no-ui å¼€å…³** - æ”¯æŒçº¯æ—¥å¿—è¾“å‡ºæ¨¡å¼ï¼Œé€‚åˆCI/è°ƒè¯•ç¯å¢ƒ
- **UI Suspend/Resume API** - äº¤äº’å¼è¾“å…¥æ—¶æš‚åœUIæ›´æ–°ï¼Œé¿å…å†²çª

#### ğŸµ éŸ³é¢‘ä¸è§†é¢‘å¢å¼º
- **MVä¸‹è½½Embyå…¼å®¹è·¯å¾„** - å®Œå…¨ç¬¦åˆEmby/Jellyfinåª’ä½“æœåŠ¡å™¨å‘½åè§„èŒƒ
- **éŸ³è´¨æ ‡ç­¾ç»Ÿä¸€å¤„ç†** - `FormatQualityTag()` ç»Ÿä¸€æ‰€æœ‰è´¨é‡æ ‡ç­¾æ ¼å¼åŒ–
- **ç‹¬ç«‹MVä¿å­˜è·¯å¾„** - æ”¯æŒ `mv-save-folder` é…ç½®

#### ğŸ’¡ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **äº¤äº’å¼æ–‡ä»¶æ£€æŸ¥** - æ£€æµ‹åˆ°æ–‡ä»¶å·²å­˜åœ¨æ—¶è¯¢é—®æ˜¯å¦æ ¡éªŒ
- **æ™ºèƒ½æç¤ºä¿¡æ¯** - åŒºåˆ†"æ–‡ä»¶è½¬ç§»å®Œæˆ"å’Œ"æ ¡éªŒå®Œæˆ"
- **æ”¹è¿›çš„ç»Ÿè®¡è¾“å‡º** - ç®€åŒ–æ ¼å¼ï¼Œä¿®å¤æ¢è¡Œç¬¦é—®é¢˜

### âš¡ Performance

#### ğŸš€ ç¼“å­˜ä¸­è½¬æœºåˆ¶ (v1.1.0+)
- **ä¸‹è½½é€Ÿåº¦æå‡ 50-70%** - é’ˆå¯¹NFSç­‰ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–
- **ç½‘ç»œI/Oå‡å°‘ 90%+** - æœ¬åœ°å¤„ç†åæ‰¹é‡ä¼ è¾“
- **åŸå­æ€§ä¿è¯** - å¤±è´¥è‡ªåŠ¨å›æ»šï¼Œä¸ç•™åƒåœ¾æ–‡ä»¶

**é…ç½®ç¤ºä¾‹ï¼š**
```yaml
enable-cache: true
cache-folder: "./Cache"
```

### ğŸ› Bug Fixes

#### ç¼“å­˜æœºåˆ¶ä¿®å¤
- **ä¿®å¤ç¼“å­˜è·³è¿‡å·²ä¸‹è½½æ–‡ä»¶é—®é¢˜** (v1.1.1) - æ™ºèƒ½æ£€æŸ¥æœ€ç»ˆç›®æ ‡è·¯å¾„
- **ä¿®å¤ffmpegæ£€æµ‹è·¯å¾„é”™è¯¯** (v1.1.2) - åŒºåˆ†å·¥ä½œè·¯å¾„å’Œè¿”å›è·¯å¾„

#### è¾“å‡ºä¼˜åŒ–
- **ä¿®å¤ç»Ÿè®¡è¾“å‡ºç¼ºå°‘æ¢è¡Œç¬¦** - è§£å†³shellæç¤ºç¬¦æ˜¾ç¤ºå¼‚å¸¸
- **ç®€åŒ–ç»Ÿè®¡è¾“å‡ºæ ¼å¼** - ç§»é™¤ä¹¦åå·ï¼Œæå‡å¯è¯»æ€§

### ğŸ“š Documentation

#### æ–°å¢æ–‡æ¡£
- `CACHE_MECHANISM.md` - å®Œæ•´ç¼“å­˜æœºåˆ¶æŠ€æœ¯æ–‡æ¡£
- `QUICKSTART_CACHE.md` - ç¼“å­˜å¿«é€Ÿå¼€å§‹æŒ‡å—
- `CACHE_UPDATE.md` - ç¼“å­˜æ›´æ–°è¯´æ˜
- `CHANGELOG.md` - ç‰ˆæœ¬å˜æ›´æ—¥å¿—ï¼ˆæœ¬æ–‡æ¡£ï¼‰

#### æ›´æ–°æ–‡æ¡£
- `README.md` - å…¨é¢æ›´æ–°åŠŸèƒ½è¯´æ˜å’Œä½¿ç”¨æŒ‡å—
- `README-CN.md` - ä¸­æ–‡æ–‡æ¡£åŒæ­¥æ›´æ–°
- `config.yaml.example` - æ·»åŠ æ–°é…ç½®é¡¹è¯´æ˜

### ğŸ”§ Configuration Changes

#### æ–°å¢é…ç½®é¡¹
```yaml
# ç¼“å­˜ä¸­è½¬æœºåˆ¶
enable-cache: true
cache-folder: "./Cache"

# MVä¿å­˜è·¯å¾„
mv-save-folder: "/media/Music/AppleMusic/MusicVideos"

# ä¸“è¾‘å’Œæ–‡ä»¶å‘½åæ ¼å¼
album-folder-format: "{AlbumName} {Tag}"
song-file-format: "{SongNumer}. {SongName}"
artist-folder-format: "{ArtistName}"
playlist-folder-format: "{PlaylistName}"
```

### ğŸ“Š Performance Benchmarks

#### æµ‹è¯•åœºæ™¯ï¼šHi-Resä¸“è¾‘ï¼ˆ12é¦–ï¼‰

| æŒ‡æ ‡ | æœªå¯ç”¨ç¼“å­˜ | å¯ç”¨ç¼“å­˜ | æå‡ |
|------|-----------|---------|------|
| ä¸‹è½½æ—¶é—´ | 510ç§’ | 190ç§’ | **63%** |
| ç½‘ç»œè¯·æ±‚ | 450æ¬¡ | 15æ¬¡ | **97%** |

---

## [v2.1.0] - 2025-10-09

### âœ¨ Features
- ç¼“å­˜ä¸­è½¬æœºåˆ¶åˆå§‹å®ç°
- MVä¸‹è½½Embyå…¼å®¹è·¯å¾„
- éŸ³è´¨æ ‡ç­¾ç»Ÿä¸€å¤„ç†æœºåˆ¶

### ğŸ› Fixes
- å¤šé¡¹æ€§èƒ½ä¼˜åŒ–å’Œç¨³å®šæ€§æ”¹è¿›

---

## [v2.0.0-logger-system] - 2025-10-09

### âœ¨ Features
- ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿé‡æ„
- é™æ€å±•ç¤ºå’Œå›ºå®šä½ç½®åˆ·æ–°
- è§£å†³å¹¶å‘ç«äº‰é—®é¢˜

---

## [v1.x] - Earlier Versions

### Core Features
- ALAC/Dolby Atmos/Hi-Res Lossless ä¸‹è½½
- å†…åµŒå°é¢å’ŒLRCæ­Œè¯
- é€è¯ä¸æœªåŒæ­¥æ­Œè¯æ”¯æŒ
- æ­Œæ‰‹ä¸“è¾‘æ‰¹é‡ä¸‹è½½
- MVä¸‹è½½åŠŸèƒ½
- äº¤äº’å¼æœç´¢
- FFmpegè‡ªåŠ¨ä¿®å¤
- å¤šè´¦å·è½®æ¢
- TXTæ‰¹é‡ä¸‹è½½

---

## Upgrade Guide

### From v2.1.0 to v2.2.0

1. **æ›´æ–°é…ç½®æ–‡ä»¶**
   ```bash
   # å¤‡ä»½ç°æœ‰é…ç½®
   cp config.yaml config.yaml.backup
   
   # æ·»åŠ æ–°é…ç½®é¡¹ï¼ˆå¯é€‰ï¼‰
   # å‚è€ƒ config.yaml.example
   ```

2. **å¯ç”¨ç¼“å­˜æœºåˆ¶**ï¼ˆæ¨èç”¨äºNFSï¼‰
   ```yaml
   enable-cache: true
   cache-folder: "./Cache"
   ```

3. **ä½¿ç”¨æ–°çš„è¾“å‡ºæ¨¡å¼**
   ```bash
   # åŠ¨æ€UIï¼ˆé»˜è®¤ï¼‰
   ./apple-music-downloader <url>
   
   # çº¯æ—¥å¿—æ¨¡å¼
   ./apple-music-downloader --no-ui <url>
   ```

### Breaking Changes

**æ— ç ´åæ€§å˜æ›´** - æ‰€æœ‰æ–°åŠŸèƒ½éƒ½æ˜¯å¯é€‰çš„ï¼Œå‘åå…¼å®¹ã€‚

---

## Known Issues

### Current Limitations
- ç¼“å­˜æœºåˆ¶éœ€è¦é¢å¤–ç£ç›˜ç©ºé—´ï¼ˆå»ºè®®50GB+ï¼‰
- åŠ¨æ€UIåœ¨æŸäº›ç»ˆç«¯ä¸Šå¯èƒ½æ˜¾ç¤ºå¼‚å¸¸ï¼ˆä½¿ç”¨`--no-ui`è§£å†³ï¼‰
- ç¿»è¯‘å’Œå‘éŸ³æ­Œè¯åŠŸèƒ½ä»åœ¨Betaé˜¶æ®µ

### Workarounds
- NFSæ…¢é€Ÿé—®é¢˜ â†’ å¯ç”¨ç¼“å­˜æœºåˆ¶
- UIæ˜¾ç¤ºæ··ä¹± â†’ ä½¿ç”¨ `--no-ui` æ ‡å¿—
- ç¼–ç é—®é¢˜ â†’ å¯ç”¨ `ffmpeg-fix`

---

## Future Plans

### v2.3.0 (è®¡åˆ’ä¸­)
- [ ] ç¼“å­˜å¤§å°é™åˆ¶å’Œè‡ªåŠ¨æ¸…ç†
- [ ] ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯é¢æ¿
- [ ] æ›´å¤šéŸ³è´¨æ ¼å¼æ”¯æŒ

### v3.0.0 (é•¿æœŸ)
- [ ] Web UI ç•Œé¢
- [ ] åˆ†å¸ƒå¼ç¼“å­˜æ”¯æŒ
- [ ] æ’ä»¶ç³»ç»Ÿ

---

## Credits

- **Sorrow** - Original script author
- **chocomint** - Created `agent-arm64.js`
- **zhaarey** - wrapper decryption service
- **Sendy McSenderson** - Stream decryption code
- All contributors and testers

---

**Note:** This changelog follows [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) format and uses [Semantic Versioning](https://semver.org/).

